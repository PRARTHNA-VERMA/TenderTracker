@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "City";

    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
}
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor Accessor
@using System.Data
@model DataTable

@if (TempData["SuccessMessage"] != null)
{
        <script>
            alert('@TempData["SuccessMessage"]');
        </script>
}
@if (TempData["Success"] != null)
{
        <script>
            alert('@TempData["Success"]');
        </script>
}
<section class="content">
    <div>
        @{
            var user = Accessor.HttpContext.Session.GetString("user_type");
            var name = Accessor.HttpContext.Session.GetString("firstname");
        }
    </div>
    <div class="container-fluid">
        <div class="row mt-3">
            <h3 class="col-md-8">City List</h3>
            <div class="col-md-4 d-flex justify-content-end"> <a class="btn btn-primary" asp-action="AddCity" asp-controller="Dashboard"> + Add City</a></div>
        </div>
        <div class="row mt-3">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <table id="example" class="table table-bordered table-hover">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>City Name</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    int i = 0;
                                    @foreach (DataRow row in Model.Rows)
                                    {
                                        i++;
                                                <tr>
                                                    <td>@i</td>
                                                    <td>@row["city"]</td>
                                                    <td>
                                                        <a asp-action="DeleteCity" asp-controller="Dashboard" asp-route-id="@row["id"]" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this City?');">Delete</a>
                                                    </td>
                                                </tr>
                                    }
                                }
                            </tbody>

                        </table>

                    </div>


                </div>

            </div>

        </div>

    </div>
</section>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/jquery/dist/jquery.js"></script>

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.1.5/js/dataTables.js"></script>



<script>
    $(document).ready(function () {
        $('#example').DataTable();
    });
</script>